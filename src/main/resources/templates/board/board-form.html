<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title th:text="${post.id == null ? '게시글 등록' : '게시글 수정'}">게시글 등록</title>
  <link rel="stylesheet" th:href="@{/css/main.css}" />
</head>
<body>
  <div th:replace="~{fragments/index-header :: header}"></div>

<div class="board-form-container">
  <h2 class="board-form-title" th:text="${post.id == null ? '게시글 등록' : '게시글 수정'}">게시글 등록</h2>

  <form th:action="@{${post.id == null} ? '/board' : '/board/' + ${post.id} + '/edit'}"
        th:object="${post}" method="post" class="board-form-box">

    <table>
      <!-- 제목 -->
      <tr>
        <th>제목</th>
        <td><input type="text" th:field="*{title}" required /></td>
      </tr>

      <!-- 카테고리 -->
      <tr>
        <th>카테고리</th>
        <td>
          <select th:field="*{category}" required>
            <option value="디저트 추천">디저트 추천</option>
            <option value="카페 추천">카페 추천</option>
          </select>
        </td>
      </tr>

      <!-- 작성자 -->
      <tr>
        <th>작성자</th>
        <td>
          <span th:if="${loginUser != null}" th:text="${loginUser.name + ' 님'}">회원 작성자</span>
          <input th:if="${loginUser == null}" type="text" name="guestName"
                 th:value="${post.guestName}" placeholder="닉네임을 입력하세요"
                 th:readonly="${post.id != null}" required />
        </td>
      </tr>

      <!-- 비회원 비밀번호 -->
      <tr th:if="${loginUser == null}">
        <th>비밀번호</th>
        <td>
            <input type="password"
                name="password"
                th:placeholder="${post.id == null ? '비밀번호 설정' : '비밀번호 확인'}"
                th:required="${post.id == null}" />
        </td>
      </tr>

      <!-- 내용 -->
      <tr>
        <th>내용</th>
        <td>
          <textarea th:field="*{content}" rows="10" required style="resize: vertical;"></textarea>
        </td>
      </tr>
    </table>

    <div class="board-form-buttons">
      <button type="submit" class="board-btn board-btn-primary" 
              th:text="${post.id == null ? '등록' : '수정'}">등록</button>
      <a th:href="@{/board}" class="board-btn board-btn-secondary">이전</a>
    </div>
  </form>
</div>


  <script th:src="@{/js/header.js}" defer></script>
</body>
</html>
